// Main Window built from a list
paned > notebook {
        &, &:backdrop {
//                margin: -6px -11px -12px -6px;
//                padding: 10px;
        }
}





notebook {
  > header {
    $_borders_color: if($light, transparentize($borders_color, 0.2), darken($slate, 8%));
    background: if($light, $porcelain, $headerbar_bg_color);
    border-color: $_borders_color;
    border-width: 1px;
    padding: 1px;

    &:backdrop {
      background-color: if($light, $backdrop_bg_color, $backdrop_headerbar_bg_color);
      border-color: $backdrop_borders_color;
    }

    tabs { margin: -1px; }

    &.top {
      border-bottom-style: solid;
      > tabs {
        padding-top: 4px;
        margin-bottom: -2px;

        > tab {
          border-radius: 4px 4px 0 0;
          &:checked { border-bottom-style: none; }
        }
      }
    }

    &.bottom {
      border-top-style: solid;
      > tabs {
        padding-bottom: 4px;
        margin-top: -2px;

        > tab {
          border-radius: 0 0 4px 4px;
          &:checked { border-top-style: none; }
        }
      }
    }

    &.left {
      border-right-style: solid;
      > tabs {
        padding-left: 4px;
        margin-right: -2px;

        > tab {
          border-radius: 4px 0 0 4px;
          &:checked { border-right-color: transparent; }
        }
      }
    }

    &.right {
      border-left-style: solid;
      > tabs {
        padding-right: 4px;
        margin-left: -2px;

        > tab {
          border-radius: 0 4px 4px 0;
          &:checked { border-left-color: transparent; }
        }
      }
    }

    &.top > tabs > arrow {
      @extend %notebook_vert_arrows;

      border-top-style: none;
    }

    &.bottom > tabs > arrow {
      @extend %notebook_vert_arrows;

      border-bottom-style: none;
    }

    @at-root %notebook_vert_arrows {
      margin-left: -5px;
      margin-right: -5px;
      padding-left: 4px;
      padding-right: 4px;

      &.down { -gtk-icon-source: -gtk-icontheme('pan-start-symbolic'); }

      &.up { -gtk-icon-source: -gtk-icontheme('pan-end-symbolic'); }
    }

    &.left > tabs > arrow {
      @extend %notebook_horz_arrows;

      border-left-style: none;
    }

    &.right > tabs > arrow {
      @extend %notebook_horz_arrows;

      border-right-style: none;
    }

    @at-root %notebook_horz_arrows {
      margin-top: -5px;
      margin-bottom: -5px;
      padding-top: 4px;
      padding-bottom: 4px;

      &.down { -gtk-icon-source: -gtk-icontheme('pan-up-symbolic'); }

      &.up { -gtk-icon-source: -gtk-icontheme('pan-down-symbolic'); }
    }

    > tabs > arrow {
      @extend %button_basic;

      @extend %button_basic.flat;

      min-height: 16px;
      min-width: 16px;
      border-radius: 0;

      &:hover:not(:active):not(:backdrop) {
        background-clip: padding-box;
        background-image: none;
        background-color: transparentize(white, 0.7);
        border-color: transparent;
        box-shadow: none;
      }

      &:disabled { @include button(undecorated); }
    }

    tab {
      min-height: 24px;
      min-width: 24px;
      padding: 4px 12px;
      outline-offset: -5px;
      outline-style: dashed;
      -gtk-outline-radius: $small_radius;
      color: transparentize($text_color, 0.3);
      border: 1px solid transparent;

      &:hover:not(:active):not(:backdrop):not(:checked) {
        @if $light {
          background-color: mix($insensitive_bg_color, $base_color, 25%);
          border-color: mix($_borders_color, $base_color, 60%);
        } @else {
          background-color: $base_color;
          border-color: $_borders_color;
        }
      }

      &:backdrop {
        color: mix($backdrop_fg_color, $backdrop_bg_color, 60%);
        &:hover {
          border-color: mix($borders_color, $backdrop_bg_color, 65%);
        }
      }

      &:checked {
        color: $fg_color;
        font-weight: 500;
        background-color: $base_color;
        border-color: $_borders_color;
        & label {padding-bottom: 1px};
      }

      &:backdrop:checked {
        background-color: $backdrop_base_color;
        border-color: $backdrop_borders_color;
        color: $backdrop_fg_color;
        & label {padding-bottom: 1px};
      }

      // colors the button like the label, overridden otherwise
      button.flat {
        &:hover {
          color: currentColor;
          background-color: $base_color;
          border-color: $base_color;
        }

        &, &:backdrop { color: gtkalpha(currentColor, 0.3); }

        padding: 0;
        margin-top: 1px;
        margin-bottom: 1px;
        // FIXME: generalize .small-button?
        min-width: 20px;
        min-height: 20px;

        &:last-child {
          margin-left: 4px;
          margin-right: -8px;
        }

        &:first-child {
          margin-left: -8px;
          margin-right: 4px;
        }
      }
    }

    &.top,
    &.bottom {
      tabs {
        padding-left: 2px;
        padding-right: 2px;

        tab {
          margin-left: 2px;
          margin-right: 2px;
        }
      }
    }

    &.left,
    &.right {
      tabs {
        padding-top: 2px;
        padding-bottom: 2px;

        tab {
          margin-top: 2px;
          margin-bottom: 2px;
        }
      }
    }

    &.top tab { padding-top: 3px; }
    &.bottom tab { padding-bottom: 3px; }
  }

  > stack:not(:only-child) { // the :not(:only-child) is for "hidden" notebooks
    background-color: $base_color;

    &:backdrop { background-color: $backdrop_base_color; }
  }
}

