notebook {
	> header {
		@include fill(normal);
		padding: 1px;
		tabs {
			margin: -1px;
		}
		&.top {
			border-bottom-style: solid;
			> tabs {
				padding-top: 4px;
				margin-bottom: -2px;
			> tab {
				border-radius: $omega1 $omega1 0 0;
				&:checked {
					border-bottom-style: none;
				}
			}
		}
	}
	&.bottom {
		border-top-style: solid;
		> tabs {
			padding-bottom: 4px;
			margin-top: -2px;
			> tab {
				border-radius: 0 0 $omega1 $omega1;
				&:checked {
					border-top-style: none;
				}
			}
		}
	}
	&.left {
		border-right-style: solid;
		> tabs {
			padding-left: 4px;
			margin-right: -2px;
			> tab {
				border-radius: $omega1 0 0 $omega1;
				&:checked {
					border-right-color: transparent;
				}
			}
		}
	}
	&.right {
		border-left-style: solid;
		> tabs {
			padding-right: 4px;
			margin-left: -2px;
			> tab {
				border-radius: 0 4px 4px 0;
				&:checked {
					border-left-color: transparent;
				}
			}
		}
	}
	&.top > tabs > arrow {
		@extend %notebook_vert_arrows;
		border-top-style: none;
	}
	&.bottom > tabs > arrow {
		@extend %notebook_vert_arrows;
		border-bottom-style: none;
	}
	@at-root %notebook_vert_arrows {
		margin-left: -5px;
		margin-right: -5px;
		padding-left: 4px;
		padding-right: 4px;
		&.down {
			-gtk-icon-source: -gtk-icontheme('pan-start-symbolic');
		}
		&.up {
			-gtk-icon-source: -gtk-icontheme('pan-end-symbolic');
		}
	}
	&.left > tabs > arrow {
		@extend %notebook_horz_arrows;
		border-left-style: none;
	}
	&.right > tabs > arrow {
		@extend %notebook_horz_arrows;
		border-right-style: none;
	}
	@at-root %notebook_horz_arrows {
		margin-top: -5px;
		margin-bottom: -5px;
		padding-top: 4px;
		padding-bottom: 4px;
		&.down {
			-gtk-icon-source: -gtk-icontheme('pan-up-symbolic');
		}
		&.up {
			-gtk-icon-source: -gtk-icontheme('pan-down-symbolic');
		}
	}
	> tabs > arrow {
		@include clickable(normal);
		min-height: 16px;
		min-width: 16px;
		border-radius: 0;
		&:hover:not(:active):not(:backdrop) {
			background-clip: padding-box;
			background-image: none;
			background-color: transparentize(white, 0.7);
			border-color: transparent;
			box-shadow: none;
		}
		&:disabled {
			@include clickable(undecorated);
		}
	}
	tab {
		min-height: 24px;
		min-width: 24px;
		padding: 4px 12px;
		outline-offset: -5px;
		outline-style: dashed;
		-gtk-outline-radius: $omega1;
		color: transparentize(if($variant==light, $dark1, $white), $alpha2);
		border: 1px solid transparent;
		&:hover:not(:active):not(:backdrop):not(:checked) {
			@include fill(normal, $alpha2);
		}
		&:checked {
			@include fill(normal);
			font-weight: 500;
			border-color: $failure;
			& label {
				padding-bottom: 1px
			}
		}
		&:backdrop:checked {
			@include fill(backdrop);
			border-color: lighten($failure, $beta1);
			& label {
				padding-bottom: 1px
			}
		}
		button.flat {
			&:hover {
				color: currentColor;
				background-color: if($variant==light, $white, $dark1);
				border-color: if($variant==light, $dark1, $white);
			}
			padding: 0;
			margin-top: 1px;
			margin-bottom: 1px;
			min-width: 20px;
			min-height: 20px;
			&:last-child {
				margin-left: 4px;
				margin-right: -8px;
			}
			&:first-child {
				margin-left: -8px;
				margin-right: 4px;
			}
		}
	}

    &.top,
    &.bottom {
      tabs {
        padding-left: 2px;
        padding-right: 2px;

        tab {
          margin-left: 2px;
          margin-right: 2px;
        }
      }
    }

    &.left,
    &.right {
      tabs {
        padding-top: 2px;
        padding-bottom: 2px;

        tab {
          margin-top: 2px;
          margin-bottom: 2px;
        }
      }
    }

    &.top tab { padding-top: 3px; }
    &.bottom tab { padding-bottom: 3px; }
  }

  > stack:not(:only-child) { // the :not(:only-child) is for "hidden" notebooks
   @include fill(normal);

    &:backdrop { @include fill(backdrop);}
  }
}


